# volatile与happens-before
在JMM中，线程之间的通信采用共享内存来实现的。volatile的内存语义是：
> 当写一个volatile变量时，JMM会把该线程对应的本地内存中共享变量立即刷新到主内存中。当读一个volatile变量时，JMM会把该线程对应的本地内存设置为无效，直接从主内存中读取共享变量。

所以volatile的写内存语义是直接刷新到主内存中，读的内存语义是直接从主内存中读取。那么volatile的内存语义是如何实现的呢？

对于一般变量则会被重排序，而对于volatile变量则不能，这样会影响其内存语义，所以为了实现volatile的内存语义JMM会限制重排序。
