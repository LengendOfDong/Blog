# 文件系统
## 分区与文件系统
对分区进行格式化是为了在分区上建立文件系统。一个分区通常只能格式化为一个文件系统，但是磁盘阵列等技术可以将一个分区格式化为多个文件系统。

## 组成
最主要的几个组成部分如下：
- inode:一个文件占用一个inode,记录文件的属性，同时记录此文件的内容所在的block编号。
- block:记录文件的内容，文件太大时，会占用多个block

除此之外还包括：
- superblock:记录文件系统的整体信息，包括inode和block的总量、使用量、剩余量，以及文件系统的格式与相关信息等；
- block bitmap:记录block是否被使用的位图。

## 文件读取
对于Ext2文件系统，当要读取一个文件的内容时，先在inode中查找文件内容所在的所有block,然后把所有block的内容读出来。

而对于FAT文件系统，它没有inode，每个block中存储着下一个block的编号。

## 磁盘碎片
指一个文件内容所在的block过于分散，导致磁盘磁头移动距离过大，从而降低磁盘读写性能。

## block
在Ext2文件系统中所支持的block大小有1k,2k及4k三种，不同的大小限制了单个文件和文件系统的最大大小。
|大小|1KB|2KB|4KB|
|--|--|--|
|最大单一文件|16GB|256GB|2TB|
|最大文件系统|2TB|8TB|16TB|
一个block只能被一个文件所使用，未使用的部分直接浪费了。因此如果需要存储大量的小文件，那么最好选用比较小的block。

## inode
inode 具体包含如下信息：
- 权限（read/write/execute);
- 拥有者与群组（owner/group);
- 容量；
- 建立或状态改变的时间（ctime,change time);
- 最近读取时间（atime,access time);
- 最近修改时间（mtime,modify time);
- 定义文件特性的旗标（flag)，如SetUID...;
- 该文件真正的内容指向（pointer);

inode具有以下特点：
- 每个inode大小均固定为128bytes(新的ext4 与 xfs可设定到256bytes);
- 每个文件都仅会占用一个inode;

## 目录
建立一个目录时，会分配一个inode与至少一个block。block
## inode记录
## inode的
## ino
