# 分区

## 分区表

磁盘分区表主要有两种格式，一种是限制较多的MBR分区表，一种是较新且限制较少的GPT分区表。

### 1.MBR

MBR中，第一扇区最重要，里面有主要开机记录（Master Boot Record,MBR)及分区表（partition table)

分区表最多只能存储4个分区，这4个分区为主分区和扩展分区。其中扩展分区只有一个，它使用其他扇区来记录额外的分区表，因此通过扩展分区可以分出更多分区，这些分区称为逻辑分区。

Linux也把分区当成文件，分区文件的命名方式为：磁盘文件名 + 编号，例如/dev/sda1,注意，逻辑分区的编号从5开始。

### 2.GPT

扇区是磁盘的最小存储单位，旧磁盘的扇区大小通常为512bytes,而最新的磁盘支持4k。GPT为了兼容所有磁盘，在定义扇区上使用逻辑区块地址（Logic Block Address,LBA),LBA默认大小为512bytes。

GPT第1个区块记录了主要开机记录（MBR),紧接着是33个区块记录分区信息，并把最后的33个区块用于对分区信息进行备份。这33个区块第一个为GPT表头记录，这个部分记录了分区表本身的位置与大小和备份分区的位置，同时放置了分区表的校验码CRC32，操作系统可以根据这个校验码来判断GPT是否正确。若有错误，可以使用备份分区进行恢复。

GPT没有扩展分区的概念，都是主分区，每个LBA可以分为4个分区，因此总共可以分4 * 32 = 128个分区。

MBR不支持2.2TB以上的硬盘，GPT则最多支持到8ZB

## 开机检测程序

### 1.BIOS

BIOS(Basic Input/Output System,基本输入输出系统)，它是一个固件（嵌入在硬件中的软件），BIOS程序存放在断电后内容不会丢失的只读内存中。

BIOS是开机的时候计算机执行的第一个程序，这个程序知道可以开机的磁盘，并读取磁盘第一个扇区的主要开机记录（MBR），由主要开机记录（MBR）执行其中的开机管理程序，这个开机管理程序会加载操作系统的核心文件。

主要开机记录（MBR) 中的开机管理程序提供以下功能：选单、载入核心文件以及转交其它开机管理程序。转交这个功能可以用来实现多重引导，只需要将另一个操作系统的开机管理程序安装在其它分区的启动扇区上，在启动开机管理程序时，就可以通过选单选择启动当前的操作系统或者转交给其它开机管理程序从而启动另一个操作系统。

安装多重引导，最好先安装Windows再安装Linux。因为安装Windows时会覆盖掉主要开机记录（MBR），而Linux可以选择将开机管理程序安装在主要开机记录（MBR）或者其他分区的启动扇区，并且可以设置开机管理程序的选单。

### 2.UEFI

BIOS不可以读取GPT分区表，而UEFI可以。