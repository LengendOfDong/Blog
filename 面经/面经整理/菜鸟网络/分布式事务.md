# 分布式事务的六种方案
分布式事务的六种方案分别为：2PC，3PC， TCC, 本地消息表， 消息事务， 最大努力通知

分布式事务：在分布式系统中实现事务，由多个本地事务组合而成。

## 2PC
2PC也就是二阶段提交。二阶段提交是一种强一致性设计， 二阶段提交引入事务协调者的角色来协调管理各参与者的提交和回滚。

二阶段分别指的是准备（投票）和提交两个阶段。

准备阶段协调者会给各参与者发送准备命令，可以把准备命令理解成除了提交事务之外什么事情都做完。

假如在第一阶段所有参与者都返回准备成功，则事务协调者发送提交事务命令，然后等待所有事务都提交成功之后，返回事务执行成功。

假如在第一阶段中有参与者返回失败，则事务协调者就会向所有参与者发送回滚事务的请求，即分布式事务执行失败。

如果第二阶段提交阶段失败，不论是进行的回滚操作还是提交操作，都需要不断重试。

二阶段提交是一个同步阻塞协议，协调者会等待所有参与者都返回响应之后才会进行下一步操作，当然第一阶段的协调者有超时机制，假设因为网络原因没有收到参与者的响应或者参与者挂了，超时后就会判断失误失败，向所有参与者发送回滚命令。

