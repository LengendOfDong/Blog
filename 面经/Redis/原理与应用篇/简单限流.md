# 简单限流
除了控制流量，限流还有一个目的就是控制用户行为，避免垃圾请求。

## 适合场景
在聊天灌水区，用户的发帖，回复，点赞等行为都需要受控，一般要严格限定某行为在规定时间内被允许的次数，超过了次数就是非法行为。

## 整体思路
每一个行为到来时，都维护一个时间窗口。将时间窗口外的记录全部清理掉，只保留窗口内的记录。

zset集合中只有score值非常重要，value没有特别的意义，只需要保证它是唯一的就可以了。

由于这几个连续的Redis操作都是针对同一个key的，使用pipeline可以显著提高Redis存取效率。

