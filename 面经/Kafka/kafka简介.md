# 消息和批次
消息由字节数组组成的，对于kafka来说，它并没有什么特殊的含义或者意义，消息可以有一个可选的元数据，也就是键。当消息以一种可控的方式写入不同的分区时，会用到键。最简单的例子就是为键生成一个一致性散列值，然后使用散列值对主题分区进行取模，为消息选取分区。这样可以保证具有相同键的消息总是被写到相同的分区上。

为了提高效率，消息被分批次写入Kafka。批次就是一组消息，需要在时间延迟和吞吐量之间进行权衡。如果累积的消息越多，一个批次的消息也就越多，需要更多的时间进行处理，同时吞吐量也会下降，但是会降低网络开销。如果每一个消息都单独穿行于网络，会导致大量的网络开销。

# 主题和分区
kafka的消息通过主题进行分类。主题可以被分为若干个分区，一个分区就是一个提交日志。消息以追加的方式写入分区，然后以先入先出的顺序进行读取。

由于一个主题包含几个分区，因此无法在整个主题范围内保证消息的顺序，但是可以保证消息在单个分区内的顺序。

