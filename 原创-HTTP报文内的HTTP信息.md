# 原创：HTTP报文内的HTTP信息

# HTTP报文

HTTP报文本身是由多行（用CR+LF作换行符）数据构成的字符串文本。<br/>
HTTP报文大致可分为报文首部和报文主体两块。两者由最初出现的空行（CR+LF）来划分。通常不一定要有报文主体。

|报文首部
|------
|空行（CR+LF）
|报文主体

请求报文和响应报文的首部内容由如下内容组成：<br/>
1.请求行<br/>
包含用于请求的方法，请求URI和HTTP版本<br/>
2.状态行<br/>
包含表明响应结果的状态码，原因短语和HTTP版本<br/>
3.首部字段<br/>
包含表示请求和响应的各种条件和属性的各类首部<br/>
一般有4种首部，分别是通用首部、请求首部、响应首部和实体首部

# 编码提升传输速率

HTTP在传输数据时可以按照数据原貌直接传输，也可以在传输过程中通过编码提升传输速率。<br/>
压缩传输的内容编码：<br/>
内容编码指明应用在实体内容上的编码格式，并保持实体信息原样压缩。内容编码后的实体由客户端接收并负责解码。<br/>
常用的内容编码有以下几种：

分割发送的分块传输编码：<br/>
在传输大容量数据时，通过把数据分割成多块，能够让浏览器逐步显示页面<br/>
HTTP/1.1中存在一种称为传输编码的机制，它可以在通信时按某种编码方式传输，但只作用于分块传输编码中

# 发送多种数据的多部分对象集合

  发送邮件时，我们可以在邮件里写入文字并添加多份附件。这是因为采用了MIME（Multipurpose Internet Mail Extensions ,多用途因特网邮件扩展）机制，它允许邮件处理文本、图片、视频等多个不同类型的数据。<br/>
在MIME扩展中会使用一种称为多部分对象集合（Multipart）的方法，来容纳多份不同类型的数据。<br/>
HTTP协议中也采纳了多部分对象集合，发送的一份报文主体内可含有多类型实体。<br/>
多部分对象集合包含的对象如下：

# 获取部分内容的范围请求

针对断点续传的问题，可以通过指定下载的实体范围来解决<br/>
执行范围请求时，会用到首部字段Range来指定资源的byte范围。<br/>
byte范围的指定形式如下：

```
Range: bytes=5001-10000

```

```
Range: bytes=5001-

```

```
Range: bytes=0-3000,5000~7000

```

对于多重范围的范围请求，响应会在首部字段Content-Type标明multipart/byteranges后返回响应报文<br/>
如果服务端无法响应范围请求，则会返回状态码200，和完整的实体内容

# 内容协商返回最合适的内容

内容协商机制是指客户端和服务器端就响应的资源内容进行交涉，然后提供给客户端最为合适的资源。<br/>
内容协商会以语言、字符集、编码方式等为基准判断响应的资源<br/>
包含在请求报文中的某些首部字段就是判断基准：
